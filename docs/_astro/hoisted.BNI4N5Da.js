import{W as g,S as h}from"./hoisted.CGnfYMy2.js";document.addEventListener("DOMContentLoaded",()=>{g();const o=document.querySelector(".search-component"),l=o.dataset.max?Number(o.dataset.max):0,u=o.dataset.threshold?Number(o.dataset.threshold):0,c=o.querySelector(".query"),a=o.querySelector(".results"),d=o.querySelector(".result-template"),y=t=>{let e="/astro-collection-search";return e.endsWith("/")||(e+="/"),(e+t.collection+"/"+t.file.replace(/\.mdx{0,1}$/,"")).toLowerCase()},f=(t,e)=>{for(const[s,r]of Object.entries(e)){const n=t.querySelector(`[data-target=${s}]`);if(n)if(typeof r=="string")n.textContent=r;else{n.textContent=r.text;for(const i of Object.entries(r.attributes))n.setAttribute(...i)}}return t},m=t=>{u&&(t=t.filter(e=>e.score>=u)),l&&(t=t.slice(0,l)),t.length?(a.textContent="",a.append(...t.map(e=>{const s=d.content.cloneNode(!0);f(s,{title:{text:e.frontmatter.title||"No title",attributes:{href:y(e)}},description:e.frontmatter.description||"No description",file:e.file,collection:e.collection,score:e.score.toString()});const r=s.querySelector(".frontmatter-container"),n=s.querySelector(".frontmatter-row");if(r&&n)for(const[i,S]of Object.entries(e.frontmatter)){const p=n.content.cloneNode(!0);r.append(f(p,{key:i,value:S}))}return s}))):a.textContent="Your search returned no results."};if(c.addEventListener("input",async()=>{const t=c.value.trim();if(t){const e=await h(t);sessionStorage.setItem("results",JSON.stringify(e)),m(e),sessionStorage.setItem("query",t)}else a.textContent="",sessionStorage.setItem("query",""),sessionStorage.setItem("results",JSON.stringify([]))}),typeof sessionStorage<"u"){c.value=sessionStorage.getItem("query")||"";const t=sessionStorage.getItem("results");if(t)try{const e=JSON.parse(t);Array.isArray(e)&&e.length&&m(e)}catch(e){console.error(e)}}});
